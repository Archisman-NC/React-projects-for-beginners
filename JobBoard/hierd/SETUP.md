# Project Setup Guide

This guide will walk you through the steps required to set up the project environment and database for local development. This project uses Supabase for the backend and database.

## Prerequisites

Before you begin, make sure you have the following installed:
* [Node.js](https://nodejs.org/) (LTS version recommended)
* [Git](https://git-scm.com/)
* A code editor (e.g., [VS Code](https://code.visualstudio.com/))
* A free [Supabase](https://supabase.com/) account

---

## 1. Clone the Repository

First, clone the project repository to your local machine.

```bash
git clone [https://github.com/your-username/your-repository-name.git](https://github.com/your-username/your-repository-name.git)
cd your-repository-name
```

---

## 2. Install Project Dependencies

Install the necessary Node.js packages for the frontend application.

```bash
npm install
```

---

## 3. Set Up Supabase

This project requires a Supabase project for the database, authentication, and storage.

1.  Go to your [Supabase Dashboard](https://supabase.com/dashboard) and click **"New project"**.
2.  Give your project a name (e.g., `job-board-dev`) and create a strong database password.
3.  Once the project is created, you will need to get your API credentials.

---

## 4. Configure Environment Variables

Your application connects to Supabase using environment variables.

1.  In the root of your project, create a new file named `.env.local`.
2.  Navigate to your Supabase project's **Settings > API**.
3.  Copy the **Project URL** and the `anon` **public key**.
4.  Add these to your `.env.local` file like this:

    ```env
    VITE_SUPABASE_URL=YOUR_SUPABASE_PROJECT_URL
    VITE_SUPABASE_ANON_KEY=YOUR_SUPABASE_ANON_PUBLIC_KEY
    ```
    *Note: If you are not using Vite, you may need to name your variables differently (e.g., `REACT_APP_...` for Create React App).*

---

## 5. Set Up the Database Schema

You need to create the tables in your new Supabase database.

1.  In your Supabase project dashboard, go to the **SQL Editor**.
2.  Click **"+ New query"**.
3.  Copy the entire SQL script below and paste it into the SQL Editor.
4.  Click the **"RUN"** button to execute the script. This will create all the necessary tables (`companies`, `jobs`, `applications`, etc.) and set up the required security policies.

### Database SQL Script

```sql
-- Create custom 'status' type for applications [cite: 75]
CREATE TYPE public.status AS ENUM (
    'applied',
    'interviewing',
    'hired',
    'rejected'
);

-- 1. Create the 'companies' table [cite: 388]
CREATE TABLE public.companies (
    id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    name text,
    logo_url text
);

-- 2. Create the 'jobs' table [cite: 391]
CREATE TABLE public.jobs (
    id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    recruiter_id uuid REFERENCES auth.users(id),
    title text,
    company_id bigint REFERENCES public.companies(id),
    description text,
    location text,
    requirements text,
    isopen boolean DEFAULT true
);

-- 3. Create the 'applications' table [cite: 385]
CREATE TABLE public.applications (
    id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    job_id bigint REFERENCES public.jobs(id) ON DELETE CASCADE,
    candidate_id uuid REFERENCES auth.users(id),
    status public.status,
    resume text,
    skills text,
    experience text,
    education text,
    name text
);

-- 4. Create the 'saved_jobs' table [cite: 394]
CREATE TABLE public.saved_jobs (
    id bigint GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at timestamp with time zone DEFAULT now() NOT NULL,
    user_id uuid REFERENCES auth.users(id),
    job_id bigint REFERENCES public.jobs(id) ON DELETE CASCADE
);

-- Enable Row Level Security (RLS) for all tables
ALTER TABLE public.companies ENABLE ROW LEVEL SECURITY; [cite: 626]
ALTER TABLE public.jobs ENABLE ROW LEVEL SECURITY; [cite: 627]
ALTER TABLE public.applications ENABLE ROW LEVEL SECURITY; [cite: 625]
ALTER TABLE public.saved_jobs ENABLE ROW LEVEL SECURITY; [cite: 628]

-- Create Policies for table access
-- Companies Table
CREATE POLICY "Enable read access for auth users" ON public.companies FOR SELECT TO authenticated USING (true); [cite: 618]
CREATE POLICY "Enable insert for authenticated users only" ON public.companies FOR INSERT TO authenticated WITH CHECK (true); [cite: 608]

-- Jobs Table
CREATE POLICY "Enable read access for auth users" ON public.jobs FOR SELECT TO authenticated USING (true); [cite: 620]
CREATE POLICY "Enable insert for authenticated users only" ON public.jobs FOR INSERT TO authenticated WITH CHECK (true); [cite: 610]
CREATE POLICY "Enable update for users based on recruiter_id" ON public.jobs FOR UPDATE TO authenticated USING (auth.uid() = recruiter_id); [cite: 622]
CREATE POLICY "Enable delete for users based on user_id" ON public.jobs FOR DELETE USING (auth.uid() = recruiter_id); [cite: 602]

-- Applications Table
CREATE POLICY "Enable read access for all users" ON public.applications FOR SELECT USING (true); [cite: 614]
CREATE POLICY "Enable insert for authenticated users only" ON public.applications FOR INSERT TO authenticated WITH CHECK (true); [cite: 606]
CREATE POLICY "Policy with table joins" ON public.applications FOR UPDATE USING (( SELECT auth.uid() AS requesting_user_id) IN ( SELECT jobs.recruiter_id
   FROM public.jobs
  WHERE (applications.job_id = jobs.id))); [cite: 624]

-- Saved Jobs Table
CREATE POLICY "Enable read access for all users" ON public.saved_jobs FOR SELECT TO authenticated USING (true); [cite: 616]
CREATE POLICY "Enable insert for authenticated users only" ON public.saved_jobs FOR INSERT TO authenticated WITH CHECK (true); [cite: 612]
CREATE POLICY "Enable delete for users based on user_id" ON public.saved_jobs FOR DELETE USING (auth.uid() = user_id); [cite: 604]

```

---

## 6. Set Up Storage Buckets

This project uses Supabase Storage for company logos and resumes.

1.  In your Supabase dashboard, go to **Storage**.
2.  Click **"Create a new bucket"**.
3.  Create a **public** bucket named `company-logo`.
4.  Create another **public** bucket named `resumes`.

---

## 7. Run the Application

You are now ready to run the project locally.

```bash
npm run dev
```

The application should now be running and connected to your new Supabase instance.
